<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Appointment Booking</title>
    <style>
        /* Global Styles */
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #e3f2fd;
        }

        /* Navbar */
        .navbar {
            background-color: #004d40;
            overflow: hidden;
            display: flex;
            justify-content: center;
            padding: 15px 0;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
        }

        .navbar a {
            color: white;
            text-decoration: none;
            padding: 14px 20px;
            font-size: 18px;
            margin: 0 15px;
            transition: 0.3s;
        }

        .navbar a:hover {
            background-color: #00796b;
            border-radius: 5px;
        }

        /* Container */
        .container {
            width: 40%;
            margin: 50px auto;
            padding: 30px;
            background: white;
            border-radius: 12px;
            box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.3);
            animation: fadeIn 1s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Progress Bar */
        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .step {
            width: 30%;
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            font-weight: bold;
            background-color: #b0bec5;
            color: black;
            transition: 0.3s ease-in-out;
        }

        .step.active {
            background-color: #00796b;
            color: white;
        }

        /* Form Styles */
        .form-step {
            display: none;
        }

        .form-step.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }

        label {
            font-weight: 600;
            margin-top: 10px;
            display: block;
        }

        input, select {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 16px;
            outline: none;
            transition: 0.3s;
        }

        input:focus, select:focus {
            border-color: #00796b;
            box-shadow: 0px 0px 5px rgba(0, 121, 107, 0.3);
        }

        /* Buttons */
        .btn-container {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: 0.3s;
        }

        .btn-next { background-color: #00796b; color: white; }
        .btn-next:hover { background-color: #004d40; }

        .btn-prev { background-color: #ccc; }
        .btn-prev:hover { background-color: #999; }

        .btn-submit {
            background-color: #00796b;
            color: white;
            display: none;
        }

        .btn-submit:hover { background-color: #004d40; }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                width: 90%;
                padding: 20px;
            }
        }

        /* Footer */
        .footer {
            background-color: #004d40;
            color: white;
            text-align: center;
            padding: 15px 0;
            position: fixed;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>
<body>

    <!-- Navbar Section -->
    <div class="navbar">
        <a href="/home">Home</a>
        <a href="about.html">About</a>
        <a href="services.html">Services</a>
        <a href="contact.html">Contact</a>
    </div>

    <!-- Appointment Form -->
    <div class="container">
        <div class="progress-bar">
            <div class="step active">Patient Info</div>
            <div class="step">Hospital & Doctor</div>
            <div class="step">Confirm</div>
        </div>
        
        <form id="appointmentForm">
            <!-- Step 1: Patient Info -->
            <div class="form-step active">
                <label>Patient Name:</label>
                <input type="text" name="PatientName" required>
                
                <label>Age:</label>
                <input type="number" name="Age" required>
                
                <label>Contact:</label>
                <input type="text" name="Contact" required>
                
                <label>Symptoms:</label>
                <input type="text" name="Symptoms" required>
                
                <label>Duration (days):</label>
                <input type="number" name="Duration" required>
            </div>
            
            <!-- Step 2: Hospital & Doctor -->
            <div class="form-step">
                <label>Choose Hospital:</label>
                <select name="HospitalName" required>
                    <option value="Fortis">Fortis</option>
                    <option value="Metro Mass">Metro Mass</option>
                    <option value="Sawai Man singh">Sawai Man singh</option>
                    <option value="Eternal">Eternal</option>
                    <option value="Mahatma Gandhi">Mahatma Gandhi</option>
                    <option value="Tagore">Tagore</option>
                    <option value="Apex">Apex</option>
                    <option value="Ck Birla">Ck Birla</option>
                    <option value="Ace">Ace</option>
                    <option value="Narayana">Narayana</option>
                    <option value="Saket">Saket</option>
                    <option value="Shelby MultiSpecialist">Shelby MultiSpecialist</option>
                </select>
                
                <label>Doctor Name:</label>
                <select name="DoctorName" required>
                    <option value="Dr. Ankit Singhal">Dr. Ankit Singhal</option>
                    <option value="Dr. Manoj Rathore">Dr. Manoj Rathore</option>
                    <option value="Dr. Tarun Sharma">Dr. Tarun Sharma</option>
                    <option value="Dr. Yogesh Raj">Dr. Yogesh Raj</option>
                    <option value="Dr. Puru Mehta">Dr. Puru Mehta</option>
                    <option value="Dr. Ravi Upadhyay">Dr. Ravi Upadhyay</option>
                    <option value="Dr. Prakrit Singh">Dr. Prakrit Singh</option>
                    <option value="Dr. Ishan Jain">Dr. Ishan Jain</option>
                    <option value="Dr. Animesh Gupta">Dr. Animesh Gupta</option>
                    <option value="Dr. Dheeraj Singh">Dr. Dheeraj Singh</option>
                    <option value="Dr. Praveen Gupta">Dr. Praveen Gupta</option>
                    <option value="Dr. Vishal Jain">Dr. Vishal Jain</option>
                </select>
                
                <label>Specialization:</label>
                <select name="Specialization" required>
                    <option value="General Physician ">General Physician </option>
                    <option value="Internal Medicine Specialist">Internal Medicine Specialist</option>
                    <option value="General Surgeon ">General Surgeon </option>
                    <option value="Orthopedic Surgeon">Orthopedic Surgeon</option>
                    <option value="NeurosurgeonCardiologist">NeurosurgeonCardiologist</option>
                    <option value="Cardiologist">Cardiologist</option>
                    <option value="Psychiatrist ">Psychiatrist </option>
                    <option value="Dermatologist ">Dermatologist </option>
                    <option value="OPD Specialist">OPD Specialist</option>
                    <option value="Urologist">Urologist</option>
                    <option value="Pulmonologist">Pulmonologist</option>
                </select>


                <label>Date</label>
                <input type="date" name="Date" required>


                <label>Blood Group</label>
                <select name="BloodGroup" required>
                    <option value="A+">A+</option>
                    <option value="A-">A-</option>
                    <option value="B+">B-</option>
                    <option value="B-">B-</option>
                    <option value="AB+">AB+</option>
                    <option value="AB-">AB-</option>
                    <option value="O+">O+</option>
                    <option value="O-">O-</option>
                </select>
            </div>
            
            <!-- Step 3: Confirm -->
            <div class="form-step">
                <h3>Confirm Your Details</h3>
                <p>Review your details before submitting.</p>
                <p>Caution - Mode of Payment will be online</p>
            </div>
            
            <!-- Buttons -->
            <div class="btn-container">
                <button type="button" class="btn btn-prev" onclick="prevStep()" style="display: none;">Previous</button>
                <button type="button" class="btn btn-next" onclick="nextStep()">Next</button>
                <button type="submit" class="btn btn-submit">Submit</button>
            </div>
        </form>
    </div>
    <!-- Footer Section -->
    <div class="footer">
        <p>&copy; 2025 Online Healthcare Appointment scheduling Platform . All rights reserved.</p>
    </div>

    
    <script>
        let currentStep = 0;
        const steps = document.querySelectorAll(".form-step");
        const progressSteps = document.querySelectorAll(".step");
        const btnPrev = document.querySelector(".btn-prev");
        const btnNext = document.querySelector(".btn-next");
        const btnSubmit = document.querySelector(".btn-submit");

        function showStep(step) {
            steps.forEach((el, index) => {
                el.classList.toggle("active", index === step);
                progressSteps[index].classList.toggle("active", index <= step);
            });

            // Handle button visibility
            btnPrev.style.display = step === 0 ? "none" : "inline-block";
            btnNext.style.display = step === steps.length - 1 ? "none" : "inline-block";
            btnSubmit.style.display = step === steps.length - 1 ? "inline-block" : "none";
        }

        function nextStep() {
            if (currentStep < steps.length - 1) {
                currentStep++;
                showStep(currentStep);
            }
        }

        function prevStep() {
            if (currentStep > 0) {
                currentStep--;
                showStep(currentStep);
            }
        }

        document.getElementById("appointmentForm").addEventListener("submit", async function(event) {
            event.preventDefault();
    
            const formData = new FormData(this);
            const data = {};
    
            formData.forEach((value, key) => {
                data[key] = value;
            });
    
            try {
                const response = await fetch("http://localhost:3000/PatientAppointmentData", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify(data),
                });
    
                const result = await response.json();
                console.log("Server Response:", result); // Debugging
    
                if (result.success) {
                    alert("Appointment Successful! Redirecting to payment...");
                    window.location.href = result.url;  // Redirect to Stripe payment
                } else {
                    alert("Appointment Failed! " + (result.message || "Unknown error."));
                }
            } catch (error) {
                console.error("Error submitting appointment:", error);
                alert("Something went wrong. Please try again.");
            }
        });
        
        
    </script>

</body>
</html>
